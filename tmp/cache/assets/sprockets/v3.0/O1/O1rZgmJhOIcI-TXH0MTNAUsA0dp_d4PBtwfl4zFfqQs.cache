I"E	(function() {
  var Notifications,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  Notifications = (function() {
    function Notifications() {
      this.handleSuccess = bind(this.handleSuccess, this);
      this.handleClick = bind(this.handleClick, this);
      this.notifications = $("[data-behavior='notifications']");
      if (this.notifications.length > 0) {
        this.setup();
      }
    }

    Notifications.prototype.setup = function() {
      $("[data-behavior='notification-items']").on("click", this.handleClick);
      return $.ajax({
        url: "/notifications.json",
        dataType: "JSON",
        method: "GET",
        success: this.handleSuccess
      });
    };

    Notifications.prototype.handleClick = function(e) {
      return $.ajax({
        url: "/notifications/mark_as_read",
        dataType: "JSON",
        method: "POST",
        success: function() {
          return $("[data-behavior='unread-count']").text("");
        }
      });
    };

    Notifications.prototype.handleSuccess = function(data) {
      var items;
      items = $.map(data, function(notification) {
        if (notification.action === "messaged") {
          return "<div class='navbar-item'> <a href='" + notification.url + "'>" + notification.actor + " " + notification.action + " you!</a> </div>";
        } else if (/commented/.test(notification.action)) {
          return "<div style='max-width:20px' class='navbar-item'> <a href='" + notification.url + "'>" + notification.actor + " " + notification.action + "</a> </div>";
        } else if (/replied/.test(notification.action)) {
          return "<div class='navbar-item'> <a href='" + notification.url + "'>" + notification.actor + " " + notification.action + "</a> </div>";
        }
      });
      if (items.length === 0) {
        $("[data-behavior='notification-items']").html("<div class='navbar-item'> <p>You have no new notifications</p> </div>");
        return $("[data-behavior='unread-count']").text("");
      } else {
        $("[data-behavior='notification-items']").html(items);
        return $("[data-behavior='unread-count']").html('<div class="button is-info is-rounded is-small">' + items.length + '</div>');
      }
    };

    return Notifications;

  })();

  jQuery(function() {
    return new Notifications;
  });

}).call(this);
:ET